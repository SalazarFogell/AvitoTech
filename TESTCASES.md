# Тест-кейсы для микросервиса объявлений

## Общая информация
- **Base URL**: https://qa-internship.avito.com
- **Версия API**: Согласно OpenAPI спецификации
- **Количество endpoint'ов**: 6

## Тест-кейсы

### 1. Создание объявления

#### TC001: Успешное создание объявления с валидными данными
**Endpoint**: POST /api/1/item
**Предусловия**: Нет
**Шаги**:
1. Отправить POST запрос на /api/1/item с валидными данными
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 200
- В ответе присутствуют все обязательные поля: id, sellerId, name, price, statistics, createdAt
- Структура statistics содержит likes, viewCount, contacts

#### TC002: Создание объявления без обязательных полей
**Endpoint**: POST /api/1/item
**Предусловия**: Нет
**Шаги**:
1. Отправить POST запрос без одного из обязательных полей (sellerID, name, price, statistics)
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 400
- В ответе присутствует структура ошибки с result и status

#### TC003: Создание объявления с невалидными типами данных
**Endpoint**: POST /api/1/item
**Предусловия**: Нет
**Шаги**:
1. Отправить POST запрос с невалидными типами данных (например, строкой вместо числа для price)
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 400
- В ответе присутствует сообщение об ошибке

### 2. Получение объявления по ID

#### TC004: Успешное получение существующего объявления
**Endpoint**: GET /api/1/item/{id}
**Предусловия**: Создано объявление с известным id
**Шаги**:
1. Отправить GET запрос на /api/1/item/{valid_id}
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 200
- Ответ в формате массива объектов
- Каждый объект содержит все обязательные поля
- Значения полей соответствуют созданному объявлению

#### TC005: Получение несуществующего объявления
**Endpoint**: GET /api/1/item/{id}
**Предусловия**: Нет
**Шаги**:
1. Отправить GET запрос на /api/1/item/{non_existent_id}
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 404
- В ответе присутствует структура ошибки

#### TC006: Получение объявления с невалидным ID форматом
**Endpoint**: GET /api/1/item/{id}
**Предусловия**: Нет
**Шаги**:
1. Отправить GET запрос на /api/1/item/{invalid_id}
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 400
- В ответе присутствует сообщение об ошибке

### 3. Получение всех объявлений продавца

#### TC007: Успешное получение объявлений существующего продавца
**Endpoint**: GET /api/1/{sellerID}/item
**Предусловия**: Создано несколько объявлений с одинаковым sellerID
**Шаги**:
1. Отправить GET запрос на /api/1/{valid_sellerID}/item
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 200
- Ответ в формате массива объектов
- Все объявления принадлежат указанному продавцу
- Каждый объект содержит все обязательные поля

#### TC008: Получение объявлений несуществующего продавца
**Endpoint**: GET /api/1/{sellerID}/item
**Предусловия**: Нет
**Шаги**:
1. Отправить GET запрос на /api/1/{non_existent_sellerID}/item
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 200
- Ответ в формате пустого массива

#### TC009: Получение объявлений с невалидным sellerID
**Endpoint**: GET /api/1/{sellerID}/item
**Предусловия**: Нет
**Шаги**:
1. Отправить GET запрос с невалидным sellerID (например, строкой)
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 400
- В ответе присутствует сообщение об ошибке

### 4. Получение статистики по объявлению

#### TC010: Успешное получение статистики существующего объявления (v1)
**Endpoint**: GET /api/1/statistic/{id}
**Предусловия**: Создано объявление с известным id
**Шаги**:
1. Отправить GET запрос на /api/1/statistic/{valid_id}
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 200
- Ответ в формате массива объектов статистики
- Каждый объект содержит likes, viewCount, contacts

#### TC011: Успешное получение статистики существующего объявления (v2)
**Endpoint**: GET /api/2/statistic/{id}
**Предусловия**: Создано объявление с известным id
**Шаги**:
1. Отправить GET запрос на /api/2/statistic/{valid_id}
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 200
- Ответ в формате массива объектов статистики
- Каждый объект содержит likes, viewCount, contacts

#### TC012: Получение статистики несуществующего объявления
**Endpoint**: GET /api/1/statistic/{id} или /api/2/statistic/{id}
**Предусловия**: Нет
**Шаги**:
1. Отправить GET запрос на /api/1/statistic/{non_existent_id}
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 404
- В ответе присутствует структура ошибки

### 5. Удаление объявления

#### TC013: Успешное удаление существующего объявления
**Endpoint**: DELETE /api/2/item/{id}
**Предусловия**: Создано объявление с известным id
**Шаги**:
1. Отправить DELETE запрос на /api/2/item/{valid_id}
2. Проверить ответ
3. Попытаться получить удаленное объявление

**Ожидаемый результат**:
- Status Code: 200 при удалении
- Status Code: 404 при попытке получения удаленного объявления

#### TC014: Удаление несуществующего объявления
**Endpoint**: DELETE /api/2/item/{id}
**Предусловия**: Нет
**Шаги**:
1. Отправить DELETE запрос на /api/2/item/{non_existent_id}
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 404
- В ответе присутствует структура ошибки

#### TC015: Удаление объявления с невалидным ID
**Endpoint**: DELETE /api/2/item/{id}
**Предусловия**: Нет
**Шаги**:
1. Отправить DELETE запрос с невалидным ID
2. Проверить ответ

**Ожидаемый результат**:
- Status Code: 400
- В ответе присутствует сообщение об ошибке

### 6. Интеграционные тесты

#### TC016: Полный цикл работы с объявлением
**Предусловия**: Нет
**Шаги**:
1. Создать объявление
2. Получить объявление по ID
3. Получить статистику по объявлению (v1 и v2)
4. Получить все объявления продавца
5. Удалить объявление
6. Проверить согласованность данных

**Ожидаемый результат**:
- Все запросы возвращают ожидаемые статус-коды
- Данные во всех ответах согласованы

#### TC017: Проверка уникальности ID создаваемых объявлений
**Предусловия**: Нет
**Шаги**:
1. Создать несколько объявлений
2. Проверить, что у всех объявлений разные id

**Ожидаемый результат**:
- Все id уникальны

#### TC018: Сравнение статистики из разных endpoint'ов
**Предусловия**: Создано объявление
**Шаги**:
1. Получить статистику через /api/1/statistic/{id}
2. Получить статистику через /api/2/statistic/{id}
3. Сравнить результаты

**Ожидаемый результат**:
- Данные статистики согласованы между версиями API